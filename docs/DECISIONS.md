# DECISIONS.md — архитектурные решения

Краткая фиксация важных решений (ADR-lite).

---

## Формат записи

```markdown
### [Код] Краткое название
**Дата:** YYYY-MM-DD  
**Контекст:** в чём вопрос.  
**Решение:** что выбрали.  
**Следствия:** плюсы/минусы, что поменялось.
```

---

## Список решений

### [001] Модульная feature-based архитектура
**Дата:** 2025-02-14  
**Контекст:** нужна масштабируемая структура под десятки фич и интеграцию ИИ.  
**Решение:** каждая фича — изолированный модуль с слоями discord / application / domain / infrastructure; взаимодействие только через Events или Application API.  
**Следствия:** чёткие границы, меньше связности, удобно для ИИ и рефакторинга.

---

### [002] Prisma только в infrastructure
**Дата:** 2025-02-14  
**Контекст:** не допустить утечки ORM в домен и use-cases.  
**Решение:** PrismaClient и запросы к БД — только в `*/infrastructure/`; domain знает только интерфейсы репозиториев.  
**Следствия:** домен остаётся чистым, проще тесты и смена хранилища.

---

### [003] ИИ как отдельная фича + интерфейсы
**Дата:** 2025-02-14  
**Контекст:** ИИ должен подключаться к разным фичам без жёсткой привязки к LLM.  
**Решение:** feature `ai` + shared/ai с интерфейсами (например `AiTextService`); фичи зависят от интерфейса, реализация в shared или в ai/infrastructure.  
**Следствия:** смена провайдера LLM без правок в других фичах, возможность агентов и tools.

---

*(Добавлять новые решения по мере появления.)*
